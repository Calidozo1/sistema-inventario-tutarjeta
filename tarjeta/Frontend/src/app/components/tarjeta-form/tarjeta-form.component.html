<div class="form-container">
  <h2>{{ tarjetaId ? 'Editar Tarjeta' : 'Registrar Nueva Tarjeta' }}</h2>

  <div *ngIf="mensaje" class="alert alert-success">{{ mensaje }}</div>
  <div *ngIf="error" class="alert alert-error">{{ error }}</div>

  <form (ngSubmit)="onSubmit()" #tarjetaForm="ngForm">
    <div class="form-group">
      <label for="codigoUnico">Código Único *</label>
      <input
        type="text"
        id="codigoUnico"
        name="codigoUnico"
        [(ngModel)]="tarjeta.codigoUnico"
        required
        class="form-control"
        placeholder="Ingrese el código único"
      />
    </div>

    <div class="form-group">
      <label for="tipo">Tipo de Tarjeta *</label>
      <input
        type="text"
        id="tipo"
        name="tipo"
        [(ngModel)]="tarjeta.tipo"
        required
        class="form-control"
        placeholder="Ej: Crédito, Débito, Prepago"
      />
    </div>

    <div class="form-group">
      <label for="estado">Estado *</label>
      <select
        id="estado"
        name="estado"
        [(ngModel)]="tarjeta.estado"
        required
        class="form-control"
      >
        <option *ngFor="let estado of estados" [value]="estado">
          {{ estado }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="usuarioAsignado">Usuario Asignado</label>
      <input
        type="text"
        id="usuarioAsignado"
        name="usuarioAsignado"
        [(ngModel)]="tarjeta.usuarioAsignado"
        class="form-control"
        placeholder="Nombre del usuario (opcional)"
      />
    </div>

    <div class="form-actions">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="!tarjetaForm.form.valid || isLoading"
      >
        {{ isLoading ? 'Procesando...' : (tarjetaId ? 'Actualizar' : 'Registrar') }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancelar()">
        Cancelar
      </button>
    </div>
  </form>
</div>
